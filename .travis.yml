sudo: required

language: python
python:
    - "3.6"

services:
    - docker

env:
    - MOZ_HEADLESS=1
addons:
    firefox: latest

before_install:
    - cd tests
    - pip install --upgrade pip
    - wget https://github.com/mozilla/geckodriver/releases/download/v0.23.0/geckodriver-v0.23.0-linux64.tar.gz
    - mkdir geckodriver
    - tar -xzf geckodriver-v0.23.0-linux64.tar.gz -C geckodriver
    - export PATH=$PATH:$PWD/geckodriver
    - geckodriver --version
    - pip install selenium
    - pip install mysql-connector

install:
    - cd ..
    - make all

script:
    - cd tests
#    - python tests.py
    - for f in *.py; do python "$f"; done
    - cat geckodriver.log
